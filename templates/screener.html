{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4"><i class="fas fa-filter"></i> Crypto Screener</h1>
    </div>
</div>

<!-- Filters -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card bg-dark text-white">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-sliders-h"></i> Filters</h5>
            </div>
            <div class="card-body">
                <form method="GET" class="row g-3">
                    <div class="col-md-3">
                        <input type="text" class="form-control" name="search" placeholder="Search coins..." 
                               value="{{ filters.search }}">
                    </div>
                    <div class="col-md-2">
                        <input type="number" class="form-control" name="min_market_cap" 
                               placeholder="Min Market Cap" value="{{ filters.min_market_cap }}">
                    </div>
                    <div class="col-md-2">
                        <input type="number" class="form-control" name="max_market_cap" 
                               placeholder="Max Market Cap" value="{{ filters.max_market_cap }}">
                    </div>
                    <div class="col-md-2">
                        <input type="number" class="form-control" name="min_volume" 
                               placeholder="Min Volume" value="{{ filters.min_volume }}">
                    </div>
                    <div class="col-md-2">
                        <input type="number" class="form-control" name="min_percent_change" 
                               placeholder="Min % Change" value="{{ filters.min_percent_change }}">
                    </div>
                    <div class="col-md-1">
                        <button type="submit" class="btn btn-primary w-100">Apply</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Results -->
<div class="row">
    <div class="col-12">
        <div class="card bg-dark text-white">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-list"></i> Results ({{ coins|length }} coins)</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-dark table-hover">
                        <thead>
                            <tr>
                                <th>Coin</th>
                                <th>Price</th>
                                <th>24h %</th>
                                <th>7d %</th>
                                <th>Market Cap</th>
                                <th>Volume (24h)</th>
                                <th>Last 7 Days</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for coin in coins %}
                            <tr>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <img src="{{ coin.image }}" alt="{{ coin.name }}" class="coin-img me-2">
                                        <div>
                                            <strong>{{ coin.symbol|upper }}</strong>
                                            <br>
                                            <small class="text-muted">{{ coin.name }}</small>
                                        </div>
                                    </div>
                                </td>
                                <td>${{ "{:,.2f}".format(coin.current_price) }}</td>
                                <td>
                                    <span class="{% if coin.price_change_percentage_24h > 0 %}text-success{% else %}text-danger{% endif %}">
                                        {{ "%.2f"|format(coin.price_change_percentage_24h) }}%
                                    </span>
                                </td>
                                <td>
                                    <span class="{% if coin.price_change_percentage_7d_in_currency > 0 %}text-success{% else %}text-danger{% endif %}">
                                        {{ "%.2f"|format(coin.price_change_percentage_7d_in_currency) }}%
                                    </span>
                                </td>
                                <td>${{ "{:,.0f}".format(coin.market_cap) }}</td>
                                <td>${{ "{:,.0f}".format(coin.total_volume) }}</td>
                                <td>
                                    <!-- Sparkline would go here -->
                                    <small class="text-muted">Chart</small>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
